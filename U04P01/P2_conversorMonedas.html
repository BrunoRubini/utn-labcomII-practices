<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Calculadora de Venta de Divisas</title>
</head>
<body>
    <h1>Calculadora de Venta de Divisas</h1>
    <form id="convertidor">
        <label for="cantidad_pesos">Cantidad de Pesos Argentinos:</label>
        <input type="number" id="cantidad_pesos" name="cantidad_pesos" required><br><br>
        
        <label for="monedas">Selecciona la Moneda Extranjera:</label>
        <select id="monedas" name="monedas" required>
            <option value="">Elegir una moneda</option>
            <option value="dolar">Dólares</option>
            <option value="euro">Euros</option>          
        </select><br><br>
        
        <button type="button" onclick="calcularConversion()">Calcular</button>
        
    </form>

    <p id="resultado"></p>
    <hr>

    <h2>Agregar Nueva Moneda</h2>
    <form id="agregar-moneda">
        <label for="nombre_moneda">Nombre de la Moneda:</label>
        <input type="text" id="nombre_moneda" name="nombre_moneda" required><br><br>
        
        <label for="costo_conversion">Costo de Conversión en Pesos:</label>
        <input type="number" id="costo_conversion" name="costo_conversion" required><br><br>
        
        <button type="button" onclick="agregarMoneda()">Agregar Moneda</button>
    </form>
    <script>
        var cotizaciones = {
            dolar : 1150, euro : 1200,
        }
        function validar_campos_cotizacion(cantidadPesos,moneda){
            if (cantidadPesos ===''){
                alert('Por favor complete la cantidad de pesos a convertir')
                return false;
            }else if(moneda ===''){
                alert('Por favor seleccione una moneda')
                return false;
            }else{
                return true;
            }
        }
        function calcularConversion() {
            var cantidadPesos = document.getElementById('cantidad_pesos').value; // traigo el valor del campo de texto numero cantidad de pesos
            var moneda = document.getElementById('monedas').value; // Con esto traigo dolar,euro, etc
            let resultado = 0;

            if (validar_campos_cotizacion(cantidadPesos,moneda)){
                var valorCotizacion = cotizaciones[moneda]
                resultado = cantidadPesos * valorCotizacion
                //document.getElementById('resultado').innerText = `Resultado: ${resultado} ${moneda}`;
                document.getElementById('resultado').innerText = 'Resultado: ' + resultado +" "+ moneda;
            }
        }

        function agregarMoneda() {
        const nombreMoneda = document.getElementById('nombre_moneda').value;
        const costoConversion = document.getElementById('costo_conversion').value;

        if (nombreMoneda === '' || costoConversion === '') {
            alert('Por favor completa todos los campos para agregar la moneda.');
            return;
        }
        const select = document.getElementById('monedas');
        const option = document.createElement('option');
        option.value = nombreMoneda;
        option.text = nombreMoneda;
        select.add(option);
        /* Agregar la moneda al arreglo de objetos*/
        cotizaciones[nombreMoneda] = costoConversion;
        /* esto es lo mismo para agregar una option a un select
        monedas.options.add(new Option(nombreMoneda,nombreMoneda))
        */
        alert(`La moneda ${nombreMoneda} ha sido agregada exitosamente.`);
        
        // Reinicio los campos para agregar otra y no tener que borrar lo anterior
        document.getElementById('nombre_moneda').value = '';
        document.getElementById('costo_conversion').value = '';
    }
    </script>
</body>
</html>